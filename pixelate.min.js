"use strict";var PIXEL_RATIO=function(){var t,e=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}(),PixelateHelper={ready:function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)},pixelateImages:function(t,e){t&&t.forEach(function(t){t.complete&&PixelateHelper.checkURL(t.src)&&(t.src=t.src+"?"+(new Date).getTime()),t.addEventListener("load",function(t){this.pixelate(e)})})},pixelateVideos:function(t,e){t&&t.forEach(function(t){t.addEventListener("play",function(t){this.pixelate(e)})})},createLocation:function(t){var e=document.createElement("a");return e.href=t,e},checkURL:function(t){return"yt3.ggpht.com"!==(t=PixelateHelper.createLocation(t)).hostname},getCSS:function(t){var e;if(t.dataset.thumb?e=PixelateHelper.createLocation(t.dataset.thumb):t.src&&(e=PixelateHelper.createLocation(t.src)),e&&e.hostname)switch(e.hostname){case"yt3.ggpht.com":return{verticalAlign:"middle"};case"s.ytimg.com":case"i.ytimg.com":if(t.parentNode.classList.contains("yt-uix-simple-thumb-related"))return{top:"-12px",position:"relative"}}return{}}};!function(t,e){t.HTMLImageElement.prototype.pixelate=function(){for(var t in this._settings={value:.25,reveal_on_hover:!1,reveal_on_click:!1},this._arguments=[],arguments)arguments.hasOwnProperty(t)&&void 0!==arguments[t]&&this._arguments.push(arguments[t]);return void 0===this._done&&(this._done=!1),this.parseArguments=function(){for(var t in this._settings)if(this._settings.hasOwnProperty(t)){if(this.dataset.hasOwnProperty(t))switch(this.dataset[t]){case"true":case"false":this._settings[t]="true"===this.dataset[t];break;default:this._settings[t]=this.dataset[t]}if(void 0!==this._arguments&&1===this._arguments.length&&this._arguments[0].hasOwnProperty(t))switch(this._arguments[0][t]){case"true":case"false":this._settings[t]="true"===this._arguments[0][t];break;default:this._settings[t]=this._arguments[0][t]}}},this.prepare=function(){this.computedWidth=getComputedStyle(this).width,this.computedHeight=getComputedStyle(this).height,this.displayWidth=parseFloat(this.computedWidth.split("px")[0]),this.displayHeight=parseFloat(this.computedHeight.split("px")[0]),this.displayWidth||console.error("this.displayWidth = ",this.displayWidth),this.canvasCrop=document.createElement("canvas"),this.canvasCrop.width=this.displayWidth,this.canvasCrop.height=this.displayHeight,this.canvasCrop.style.display="none",this.contextCrop=this.canvasCrop.getContext("2d"),this.contextCrop.mozImageSmoothingEnabled=!1,this.contextCrop.webkitImageSmoothingEnabled=!1,this.contextCrop.imageSmoothingEnabled=!1,this.parentNode.insertBefore(this.canvasCrop,this),ratio=PIXEL_RATIO,this.canvas=document.createElement("canvas"),this.canvas.width=this.displayWidth*ratio,this.canvas.height=this.displayHeight*ratio,this.canvas.style=this.style,this.canvas.style.height="auto";var t=PixelateHelper.getCSS(this);for(var e in t)t.hasOwnProperty(e)&&(this.canvas.style[e]=t[e]);for(var i in this.canvas.classList=this.classList,this.dataset)if(this.dataset.hasOwnProperty(i)){if("reactid"===i)continue;this.canvas.dataset[i]=this.dataset[i]}this.canvas.getContext("2d").setTransform(ratio,0,0,ratio,0,0),this.context=this.canvas.getContext("2d"),this.context.mozImageSmoothingEnabled=!1,this.context.webkitImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.cropWidth=this.displayWidth*this._settings.value,this.cropHeight=this.displayHeight*this._settings.value,this.style.display="none",this.parentNode.insertBefore(this.canvas,this)},this.showCroppedImage=function(){this.contextCrop.drawImage(this,0,0,this.cropWidth,this.cropHeight),this.context.clearRect(0,0,this.displayWidth,this.displayHeight),this.context.drawImage(this.canvasCrop,0,0,this.cropWidth,this.cropHeight,0,0,this.displayWidth,this.displayHeight)},this.showFullImage=function(){this.context.clearRect(0,0,this.displayWidth,this.displayHeight),this.context.drawImage(this,0,0,this.displayWidth,this.displayHeight)},this.showCroppedVideo=(function(){this.fullRequestID&&cancelAnimationFrame(this.fullRequestID),this.cropRequestID=requestAnimationFrame(this.showCroppedVideo),this.showCroppedImage()}).bind(this),this.showFullVideo=(function(){this.cropRequestID&&cancelAnimationFrame(this.cropRequestID),this.fullRequestID=requestAnimationFrame(this.showFullVideo),this.showFullImage()}).bind(this),this.listen=function(){this.releaved=!1,!0===this._settings.reveal_on_hover&&(this.canvas.addEventListener("mouseenter",(function(){this.revealed||this.showFull()}).bind(this)),this.canvas.addEventListener("mouseleave",(function(){this.revealed||this.showCropped()}).bind(this))),!0===this._settings.reveal_on_click&&this.canvas.addEventListener("click",(function(){this.revealed=!this.revealed,this.revealed?this.showFull():this.showCropped()}).bind(this))},this._done||(this._done=!0,this.parseArguments(),this.prepare(),this instanceof HTMLVideoElement?(this.showCropped=this.showCroppedVideo,this.showFull=this.showFullVideo):(this.showCropped=this.showCroppedImage,this.showFull=this.showFullImage),this.showCropped(),this.listen()),this},t.HTMLVideoElement.prototype.pixelate=t.HTMLImageElement.prototype.pixelate,"function"==typeof e&&e.fn.extend({pixelate:function(){return this.each(function(){t.HTMLImageElement.prototype.pixelate.apply(this,arguments)})}}),PixelateHelper.ready(function(){PixelateHelper.pixelateImages(document.querySelectorAll("img[data-pixelate]")),PixelateHelper.pixelateVideos(document.querySelectorAll("video[data-pixelate]"))})}(window,"undefined"==typeof jQuery?null:jQuery);